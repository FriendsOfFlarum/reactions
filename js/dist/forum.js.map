{"version":3,"sources":["webpack://@fof/reactions/webpack/bootstrap","webpack://@fof/reactions/./forum.js","webpack://@fof/reactions/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/reactions/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/reactions/./node_modules/simple-emoji-map/index.mjs","webpack://@fof/reactions/./src/common/components/ReactionComponent.js","webpack://@fof/reactions/./src/common/models/Reaction.js","webpack://@fof/reactions/./src/common/util/emoji.js","webpack://@fof/reactions/./src/forum/addPusher.js","webpack://@fof/reactions/./src/forum/addReactionAction.js","webpack://@fof/reactions/./src/forum/components/PostReactAction.js","webpack://@fof/reactions/./src/forum/components/PostReactedNotification.js","webpack://@fof/reactions/./src/forum/components/ReactionsModal.js","webpack://@fof/reactions/./src/forum/index.js","webpack://@fof/reactions/./src/forum/models/PostReaction.js","webpack://@fof/reactions/./src/forum/utils/groupBy.js","webpack://@fof/reactions/external \"flarum.core.compat['Component']\"","webpack://@fof/reactions/external \"flarum.core.compat['Model']\"","webpack://@fof/reactions/external \"flarum.core.compat['app']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/Alert']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/Button']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/CommentPost']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/DiscussionPage']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/LogInModal']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/Notification']\"","webpack://@fof/reactions/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@fof/reactions/external \"flarum.core.compat['extend']\"","webpack://@fof/reactions/external \"flarum.core.compat['helpers/avatar']\"","webpack://@fof/reactions/external \"flarum.core.compat['helpers/icon']\"","webpack://@fof/reactions/external \"flarum.core.compat['helpers/listItems']\"","webpack://@fof/reactions/external \"flarum.core.compat['helpers/username']\"","webpack://@fof/reactions/external \"flarum.core.compat['models/Discussion']\"","webpack://@fof/reactions/external \"flarum.core.compat['models/Forum']\"","webpack://@fof/reactions/external \"flarum.core.compat['models/Post']\"","webpack://@fof/reactions/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/reactions/external \"flarum.core.compat['utils/PostControls']\"","webpack://@fof/reactions/external \"flarum.core.compat['utils/extract']\"","webpack://@fof/reactions/external \"flarum.core.compat['utils/mixin']\""],"names":["ReactionComponent","view","attrs","props","reaction","extract","className","display","identifier","title","type","emoji","url","Component","Reaction","mixin","Model","attribute","enabled","user_id","post_id","reaction_id","flatten","arr","depth","reduce","a","v","concat","Array","isArray","shortnames","Object","values","emojis","entries","getEmoji","find","value","includes","toUnicodeEmoji","codePoint","String","fromCodePoint","split","map","e","Match","input","r","finalScore","emojiName","forEach","n","i","length","c","equals","indexF","indexOf","indexS","score","emojiCache","Map","reactionOrIdentifier","has","get","match","output","uc","set","extend","DiscussionPage","prototype","x","isInitialized","context","app","pusher","then","channels","main","bind","id","userId","postId","reactionId","store","getById","post","pushObject","attributes","relationships","user","data","post_reactions","push","m","redraw","postReaction","all","filter","remove","unbind","CommentPost","items","isHidden","session","reactions","some","add","PostReactAction","component","PostControls","discussion","canSeeReactions","modal","show","ReactionsModal","translator","trans","init","updateChosenReaction","config","window","$","on","toggleClass","document","click","target","is","parents","removeClass","getReactions","ItemList","forum","replace","react","postReactions","groupBy","Boolean","canReact","keys","count","spanClass","icon","Button","onclick","disabled","children","reactButton","number","listItems","toArray","blur","LogInModal","alerts","successAlert","Alert","save","ranks","undefined","likes","err","append","PostReactedNotification","href","route","notification","subject","content","JSON","parse","fromUser","excerpt","contentPlain","Notification","loading","groupedReactions","load","avatar","username","request","method","apiEndpoint","include","response","pushPayload","loaded","Modal","initializers","models","PostReaction","notificationComponents","postReacted","Post","hasMany","Forum","Discussion","addReactionAction","addPusher","NotificationGrid","name","label","hasOne","fn","val","acc"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/common';\r\nexport * from './src/forum';","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","export { default } from './generated/emojis.json';\n","import Component from 'flarum/Component';\nimport extract from 'flarum/utils/extract';\n\nimport emoji from '../util/emoji';\n\nexport default class ReactionComponent extends Component {\n    view() {\n        const attrs = { ...this.props };\n        const reaction = extract(attrs, 'reaction');\n        const className = extract(attrs, 'className');\n\n        if (!reaction) return <span />;\n\n        const display = reaction.display() || reaction.identifier();\n\n        if (!attrs.title) attrs.title = display;\n\n        if (reaction.type() === 'emoji') {\n            const { url } = emoji(reaction.identifier());\n\n            return <img className={`${className} emoji`} src={url} loading=\"lazy\" draggable=\"false\" alt={display} {...attrs} />;\n        } else {\n            return <i className={`${className} icon`} aria-hidden {...attrs} />;\n        }\n    }\n}\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\nexport default class Reaction extends mixin(Model, {\n    identifier: Model.attribute('identifier'),\n    display: Model.attribute('display'),\n    type: Model.attribute('type'),\n    enabled: Model.attribute('enabled'),\n\n    user_id: Model.attribute('user_id'),\n    post_id: Model.attribute('post_id'),\n    reaction_id: Model.attribute('reaction_id'),\n}) {}\n","import emojis from 'simple-emoji-map';\n\nconst flatten = (arr, depth = 1) => arr.reduce((a, v) => a.concat(depth > 1 && Array.isArray(v) ? flatten(v, depth - 1) : v), []);\nconst shortnames = flatten(Object.values(emojis));\nconst entries = Object.entries(emojis);\nconst getEmoji = (identifier) => entries.find(([, value]) => value.includes(identifier));\nconst toUnicodeEmoji = (codePoint) => String.fromCodePoint(...codePoint.split('-').map((e) => `0x${e}`));\n\nexport class Match {\n    /**\n     * Match\n     * Creates a new `Match` instance.\n     *\n     * It contains the following properties:\n     *\n     *  - `input` (String): The input string.\n     *  - `score` (Number): A number between `0` and `1`. The closer to `1` it is, the better match it is.\n     *  - `emoji` (Object): The emoji object.\n     *  - `emoji_name` (String): The emoji name.\n     *\n     * @name Match\n     * @function\n     * @param {String} input The input string (just a word).\n     */\n    constructor(input) {\n        let r = emojis[input],\n            finalScore = -1,\n            emojiName = null;\n\n        if (r) {\n            finalScore = 1;\n            emojiName = input;\n        } else {\n            Object.entries(emojis).forEach(([n, e]) => {\n                for (let i = 0; i <= e.length; ++i) {\n                    const c = e[i] || n,\n                        equals = c === input,\n                        indexF = c.indexOf(input),\n                        indexS = input.indexOf(c),\n                        score = equals && input.length ? 1 : indexF === 0 || (indexS === 0 && c.length > 1) ? 1 : indexF > 0 || indexS > 0 ? 0 : -1;\n\n                    if (score > finalScore) {\n                        emojiName = n;\n                        finalScore = score;\n                        if (score === 1) {\n                            return false;\n                        }\n                    }\n                }\n            });\n        }\n\n        this.score = finalScore;\n        this.emoji = emojiName;\n    }\n}\nconst emojiCache = new Map();\n\nexport default (reactionOrIdentifier) => {\n    if (!reactionOrIdentifier) return {};\n\n    const identifier = reactionOrIdentifier.identifier || reactionOrIdentifier;\n    let codePoint;\n\n    if (emojiCache.has(identifier)) return emojiCache.get(identifier);\n\n    if (shortnames.includes(identifier)) {\n        const emoji = getEmoji(identifier);\n        codePoint = emoji && emoji[0];\n    } else {\n        const match = new Match(identifier);\n        if (match.score) codePoint = match.emoji;\n    }\n\n    if (codePoint) {\n        codePoint = codePoint.split('-')[0];\n    }\n\n    const output = codePoint\n        ? {\n              identifier,\n              uc: toUnicodeEmoji(codePoint),\n              url: `//cdn.jsdelivr.net/gh/twitter/twemoji@12/assets/72x72/${codePoint}.png`,\n              type: 'emoji',\n          }\n        : {};\n\n    emojiCache.set(reactionOrIdentifier, output);\n\n    return output || {};\n};\n","import { extend } from 'flarum/extend';\r\n\r\nimport DiscussionPage from 'flarum/components/DiscussionPage';\r\n\r\nexport default () => {\r\n    extend(DiscussionPage.prototype, 'config', function (x, isInitialized, context) {\r\n        if (isInitialized) return;\r\n\r\n        if (app.pusher) {\r\n            app.pusher.then((channels) => {\r\n                channels.main.bind('newReaction', ({ id, userId, postId, reactionId }) => {\r\n                    const reaction = app.store.getById('reactions', reactionId);\r\n                    const post = app.store.getById('posts', postId);\r\n\r\n                    if (!reaction || !post) return;\r\n\r\n                    app.store.pushObject({\r\n                        type: 'post_reactions',\r\n                        id,\r\n                        attributes: {\r\n                            userId,\r\n                            postId,\r\n                            reactionId,\r\n                        },\r\n                        relationships: {\r\n                            user: {\r\n                                data: {\r\n                                    type: 'users',\r\n                                    id: userId,\r\n                                },\r\n                            },\r\n                            reaction: {\r\n                                data: {\r\n                                    type: 'reactions',\r\n                                    id: reactionId,\r\n                                }\r\n                            },\r\n                            post: {\r\n                                data: {\r\n                                    type: 'posts',\r\n                                    id: postId,\r\n                                }\r\n                            }\r\n                        },\r\n                    });\r\n\r\n                    if (!post.data.relationships) post.data.relationships = {};\r\n                    if (!post.data.relationships.post_reactions) post.data.relationships.post_reactions = { data: [] };\r\n\r\n                    post.data.relationships.post_reactions.data.push({\r\n                        type: 'post_reactions',\r\n                        id,\r\n                    });\r\n\r\n                    app.store.pushObject(post.data);\r\n\r\n                    m.redraw();\r\n                });\r\n\r\n                channels.main.bind('removedReaction', ({ userId, postId, reactionId }) => {\r\n                    const postReaction = app.store\r\n                        .all('post_reactions')\r\n                        .filter((r) => r.userId() == userId && r.postId() == postId && r.reactionId() == reactionId)[0];\r\n\r\n                    if (!postReaction) return;\r\n\r\n                    app.store.remove(postReaction);\r\n\r\n                    m.redraw();\r\n                });\r\n\r\n                extend(context, 'onunload', () => channels.main.unbind('newReaction'));\r\n                extend(context, 'onunload', () => channels.main.unbind('removedReaction'));\r\n            });\r\n        }\r\n    });\r\n};\r\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostReactAction from './components/PostReactAction';\nimport PostControls from 'flarum/utils/PostControls';\nimport Button from 'flarum/components/Button';\nimport ReactionsModal from './components/ReactionsModal';\n\nexport default () => {\n    extend(CommentPost.prototype, 'actionItems', function (items) {\n        const post = this.props.post;\n\n        if (post.isHidden()) return;\n\n        const reaction = app.session.user && Array.isArray(post.reactions()) && post.reactions().some((user) => user === app.session.user);\n\n        items.add(\n            'react',\n            PostReactAction.component({\n                post,\n                reaction,\n            }),\n            5\n        );\n    });\n\n    extend(PostControls, 'moderationControls', function (items, post) {\n        if (post.discussion().canSeeReactions() && post.reactions() && post.reactions().length) {\n            items.add(\n                'viewReactions',\n                <Button icon=\"fas fa-heart\" onclick={() => app.modal.show(new ReactionsModal({ post }))}>\n                    {app.translator.trans('fof-reactions.forum.mod_item')}\n                </Button>\n            );\n        }\n    });\n};\n","import Alert from 'flarum/components/Alert';\nimport Component from 'flarum/Component';\nimport ItemList from 'flarum/utils/ItemList';\nimport Button from 'flarum/components/Button';\nimport listItems from 'flarum/helpers/listItems';\nimport LogInModal from 'flarum/components/LogInModal';\n\nimport groupBy from '../utils/groupBy';\nimport ReactionComponent from '../../common/components/ReactionComponent';\n\nexport default class PostReactAction extends Component {\n    init() {\n        this.post = this.props.post;\n\n        this.updateChosenReaction();\n    }\n\n    config(isInitialized) {\n        if (isInitialized) return;\n\n        if ('ontouchstart' in window) {\n            $('.Reactions')\n                .unbind()\n                .on('touchend', function () {\n                    $(this).find('.CommentPost--Reactions').toggleClass('mobile-show');\n                });\n            $(document).click(function (e) {\n                var target = e.target;\n                if (!$(target).is('.Reactions') && !$(target).parents().is('.Reactions')) {\n                    $('.CommentPost--Reactions').removeClass('mobile-show');\n                }\n            });\n        }\n    }\n\n    getReactions() {\n        const items = new ItemList();\n\n        app.forum.reactions().forEach((reaction) =>\n            items.add(\n                reaction.identifier().replace(/fa.? fa-/, ''),\n                <button\n                    className=\"Button Button--link\"\n                    type=\"button\"\n                    title={reaction.display() || reaction.identifier()}\n                    onclick={this.react.bind(this, reaction)}\n                    data-reaction={reaction.identifier()}\n                >\n                    <span className=\"Button-label\">\n                        <ReactionComponent className={reaction.type()} reaction={reaction} />\n                    </span>\n                </button>\n            )\n        );\n\n        return items;\n    }\n\n    view() {\n        const postReactions = groupBy(this.post.reactions().filter(Boolean) || [], (r) => r.reactionId());\n        const canReact = this.post.canReact();\n\n        return (\n            <div style=\"margin-right: 7px\" className=\"Reactions\">\n                <div className=\"Reactions--reactions\">\n                    {Object.keys(postReactions).map((id) => {\n                        const reaction = app.store.getById('reactions', id);\n                        const count = postReactions[id].length;\n\n                        if (count === 0) return;\n\n                        const spanClass = reaction.type() === 'icon' ? `${reaction.identifier()} emoji button-emoji reaction-icon` : '';\n                        const icon = <ReactionComponent reaction={reaction} className={spanClass} data-reaction={reaction.identifier()} />;\n\n                        return Button.component({\n                            className: `Button Button--flat Button-emoji-parent ${this.reaction && this.reaction.reactionId() == reaction.id() && 'active'}`,\n                            onclick: canReact ? this.react.bind(this, this.reaction) : '',\n                            'data-reaction': reaction.identifier(),\n                            disabled: !canReact,\n                            children: <span>\n                                {icon} {count > 1 ? <span className=\"count\">{count}</span> : ''}\n                            </span>\n                        });\n                    })}\n                </div>\n\n                <div className=\"Reactions--react\">\n                    {this.reactButton()}\n\n                    {!this.reaction && canReact ? (\n                        <div className=\"CommentPost--Reactions\" style={this.post.number() === 1 ? '' : 'left: -28%;'}>\n                            <ul className=\"Reactions--Ul\">{listItems(this.getReactions().toArray())}</ul>\n                        </div>\n                    ) : null}\n                </div>\n            </div>\n        );\n    }\n\n    reactButton() {\n        if (this.reaction || !this.post.canReact()) {\n            return;\n        }\n\n        return (\n            <button className=\"Button Button--link Reactions--ShowReactions\" type=\"Button\" title=\"React\">\n                <span className=\"Button-label\">\n                    <svg class=\"button-react\" width=\"20px\" height=\"20px\" viewBox=\"0 0 18 18\">\n                        /* Generator: Sketch 40.3 (33839) - http://www.bohemiancoding.com/sketch */\n                        <g id=\"Page-1\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\n                            <g id=\"ic_reactions_grey_16px\">\n                                <g id=\"Group-2\">\n                                    <g id=\"0:0:0:0\">\n                                        <rect id=\"Rectangle-5\" x=\"0\" y=\"0\" width=\"18\" height=\"18\" />\n                                        <g id=\"emoticon\" />\n                                        <path\n                                            d=\"M14.6332705,7.33333333 C14.6554304,7.55389388 14.6666667,7.77636769 14.6666667,8 C14.6666667,11.6818983 11.6818983,14.6666667 8,14.6666667 C6.23189007,14.6666667 4.53619732,13.9642877 3.28595479,12.7140452 C2.03571227,11.4638027 1.33333333,9.76810993 1.33333333,8 C1.33333333,4.33333333 4.31333333,1.33333333 8,1.33333333 L8,1.33333333 C8.22363231,1.33333333 8.44610612,1.3445696 8.66666667,1.36672949 L8.66666667,2.70847693 C8.44668912,2.68076722 8.22407146,2.66666667 8,2.66666667 C5.05448133,2.66666667 2.66666667,5.05448133 2.66666667,8 C2.66666667,10.9455187 5.05448133,13.3333333 8,13.3333333 C10.9455187,13.3333333 13.3333333,10.9455187 13.3333333,8 C13.3333333,7.77592854 13.3192328,7.55331088 13.2915231,7.33333333 L14.6332705,7.33333333 Z M8,11.6666667 C9.55333333,11.6666667 10.8666667,10.6933333 11.4066667,9.33333333 L4.59333333,9.33333333 C5.12666667,10.6933333 6.44666667,11.6666667 8,11.6666667 Z M10.3333333,7.33333333 C10.8856181,7.33333333 11.3333333,6.88561808 11.3333333,6.33333333 C11.3333333,5.78104858 10.8856181,5.33333333 10.3333333,5.33333333 C9.78104858,5.33333333 9.33333333,5.78104858 9.33333333,6.33333333 C9.33333333,6.88561808 9.78104858,7.33333333 10.3333333,7.33333333 L10.3333333,7.33333333 Z M5.66666667,7.33333333 C6.21895142,7.33333333 6.66666667,6.88561808 6.66666667,6.33333333 C6.66666667,5.78104858 6.21895142,5.33333333 5.66666667,5.33333333 C5.11438192,5.33333333 4.66666667,5.78104858 4.66666667,6.33333333 C4.66666667,6.88561808 5.11438192,7.33333333 5.66666667,7.33333333 Z\"\n                                            id=\"Combined-Shape\"\n                                            fill=\"#667c99\"\n                                        />\n                                    </g>\n                                    <g id=\"Group-15\" transform=\"translate(10.666667, 0.000000)\" fill=\"#667c99\">\n                                        <polygon\n                                            id=\"Path\"\n                                            points=\"3.33333333 2 3.33333333 0 2 0 2 2 0 2 0 3.33333333 2 3.33333333 2 5.33333333 3.33333333 5.33333333 3.33333333 3.33333333 5.33333333 3.33333333 5.33333333 2\"\n                                        />\n                                    </g>\n                                </g>\n                            </g>\n                        </g>\n                    </svg>\n                </span>\n            </button>\n        );\n    }\n\n    react(reaction, e) {\n        e.target.blur();\n\n        if (!app.session.user) {\n            app.modal.show(new LogInModal());\n            return;\n        }\n\n        if (!this.post.canReact()) {\n            return app.alerts.show(\n                (this.successAlert = new Alert({\n                    type: 'error',\n                    children: app.translator.trans('core.lib.error.permission_denied_message'),\n                }))\n            );\n        }\n\n        // const identifier = reaction === this.reaction ? '' : reaction.identifier();\n\n        this.post\n            .save({ reaction: (reaction && reaction.id()) || null })\n            .then(() => {\n                this.updateChosenReaction();\n\n                /**\n                 * We've saved the fact that we have or haven't reacted to the post,\n                 * but in order to provide instantaneous feedback to the user, we'll\n                 * need to add or remove the reaction from the current ones manually\n                 */\n\n                if (\n                    (app.forum.data.relationships.ranks !== undefined &&\n                        (app.forum.attribute('ReactionConverts')[0] === reaction || app.forum.attribute('ReactionConverts')[1] === reaction)) ||\n                    (this.post.data.relationships.likes !== undefined && app.forum.attribute('ReactionConverts')[2] === reaction)\n                ) {\n                    app.alerts.show(\n                        (this.successAlert = new Alert({\n                            type: 'warning',\n                            children: app.translator.trans('fof-reactions.forum.warning', {\n                                reaction,\n                            }),\n                        }))\n                    );\n                }\n\n                m.redraw();\n            })\n            .catch((err) => $('body').append(err));\n    }\n\n    updateChosenReaction() {\n        const postReactions = this.post.reactions() || [];\n\n        return (this.reaction = app.session.user && postReactions.filter((reaction) => reaction.userId() == app.session.user.id())[0]);\n    }\n}\n","import Notification from 'flarum/components/Notification';\nimport icon from 'flarum/helpers/icon';\n\nimport emoji from '../../common/util/emoji';\n\nexport default class PostReactedNotification extends Notification {\n    icon() {\n        return 'fas fa-heart';\n    }\n\n    href() {\n        return app.route.post(this.props.notification.subject());\n    }\n\n    content() {\n        const notification = this.props.notification;\n        const { identifier, type } = JSON.parse(notification.content());\n        const user = notification.fromUser();\n\n        const reaction = type === 'emoji' ? <img src={emoji(identifier).url} loading=\"lazy\" height=\"14px\" /> : icon(identifier);\n\n        return app.translator.trans('fof-reactions.forum.notification', {\n            user,\n            reaction,\n        });\n    }\n\n    excerpt() {\n        return this.props.notification.subject().contentPlain();\n    }\n}\n","import Modal from 'flarum/components/Modal';\r\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\r\nimport avatar from 'flarum/helpers/avatar';\r\nimport username from 'flarum/helpers/username';\r\n\r\nimport ReactionComponent from '../../common/components/ReactionComponent';\r\nimport groupBy from '../utils/groupBy';\r\n\r\nexport default class ReactionsModal extends Modal {\r\n    className() {\r\n        return 'ReactionsModal Modal--small';\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('fof-reactions.forum.modal.title');\r\n    }\r\n\r\n    init() {\r\n        this.loading = true;\r\n\r\n        this.groupedReactions = groupBy(this.props.post.reactions().filter(Boolean), (r) => r.reactionId());\r\n\r\n        this.load();\r\n    }\r\n\r\n    content() {\r\n        if (this.loading) {\r\n            return (\r\n                <div className=\"Modal-body\">\r\n                    <LoadingIndicator />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <div className=\"Modal-body\">\r\n                <ul className=\"ReactionsModal-list\">\r\n                    {Object.keys(this.groupedReactions).map((id) => {\r\n                        const reaction = app.store.getById('reactions', id);\r\n                        const postReactions = this.groupedReactions[id];\r\n\r\n                        if (!postReactions.length) return;\r\n\r\n                        return (\r\n                            <div className=\"ReactionsModal-group\">\r\n                                <legend>\r\n                                    <ReactionComponent reaction={reaction} className={'ReactionModal-reaction'} />\r\n\r\n                                    <label className=\"ReactionsModal-display\">{reaction.display() || reaction.identifier()}</label>\r\n                                </legend>\r\n\r\n                                <hr className=\"ReactionsModal-delimiter\" />\r\n\r\n                                {postReactions.filter(r => r.user()).map((r) => (\r\n                                    <li>\r\n                                        <a className=\"ReactionsModal-user\" href={app.route.user(r.user())} config={m.route}>\r\n                                            {avatar(r.user(), { loading: 'lazy' })} {username(r.user())}\r\n                                        </a>\r\n                                    </li>\r\n                                ))}\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    load() {\r\n        return app\r\n            .request({\r\n                method: 'GET',\r\n                url: app.forum.attribute('apiUrl') + this.props.post.apiEndpoint() + '/reactions',\r\n                data: { include: 'user' },\r\n            })\r\n            .then((response) => app.store.pushPayload(response))\r\n            .then(this.loaded.bind(this), this.loaded.bind(this));\r\n    }\r\n}\r\n","import { extend } from 'flarum/extend';\r\nimport app from 'flarum/app';\r\nimport Forum from 'flarum/models/Forum';\r\nimport Discussion from 'flarum/models/Discussion';\r\nimport Post from 'flarum/models/Post';\r\nimport Model from 'flarum/Model';\r\nimport NotificationGrid from 'flarum/components/NotificationGrid';\r\n\r\nimport PostReactedNotification from './components/PostReactedNotification';\r\nimport Reaction from '../common/models/Reaction';\r\nimport PostReaction from './models/PostReaction';\r\n\r\nimport addPusher from './addPusher';\r\nimport addReactionAction from './addReactionAction';\r\n\r\napp.initializers.add('fof/reactions', () => {\r\n    app.store.models.reactions = Reaction;\r\n    app.store.models.post_reactions = PostReaction;\r\n\r\n    app.notificationComponents.postReacted = PostReactedNotification;\r\n\r\n    Post.prototype.canReact = Model.attribute('canReact');\r\n    Post.prototype.reactions = Model.hasMany('reactions');\r\n\r\n    Forum.prototype.reactions = Model.hasMany('reactions');\r\n\r\n    Discussion.prototype.canSeeReactions = Model.attribute('canSeeReactions');\r\n\r\n    addReactionAction();\r\n    addPusher();\r\n\r\n    extend(NotificationGrid.prototype, 'notificationTypes', (items) => {\r\n        items.add('postReacted', {\r\n            name: 'postReacted',\r\n            icon: 'fas fa-eye',\r\n            label: app.translator.trans('fof-reactions.forum.settings.notify_post_reacted_label'),\r\n        });\r\n    });\r\n});\r\n","import Model from 'flarum/Model';\nimport mixin from 'flarum/utils/mixin';\n\n// const reaction = Model.hasOne('reaction');\n\nexport default class PostReaction extends mixin(Model, {\n    reaction: Model.hasOne('reaction'),\n\n    userId: Model.attribute('userId'),\n    postId: Model.attribute('postId'),\n    reactionId: Model.attribute('reactionId'),\n\n    user: Model.hasOne('user'),\n    post: Model.hasOne('post'),\n}) {}\n","export default (arr, fn) =>\n    arr.map(typeof fn === 'function' ? fn : (val) => val[fn]).reduce((acc, val, i) => {\n        acc[val] = (acc[val] || []).concat(arr[i]);\n        return acc;\n    }, {});\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/DiscussionPage'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/listItems'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Discussion'];","module.exports = flarum.core.compat['models/Forum'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/mixin'];"],"sourceRoot":""}